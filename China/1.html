<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<script src="http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"></script>
		
		<link rel="stylesheet" type="text/css" href="swiper.min.css"/>
		<!--加载每个页面的CSS-->
		<link rel="stylesheet" type="text/css" href="page1.css"/>
		<title></title>
		<style type="text/css">
		*{margin: 0;padding: 0;}
		
		html, body {
	        position: relative;
	        width: 100%;
	        height: 100%;
	    }
	    body {
	        background: #fff;
	        font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
	        color:#000;
	    }
	    .swiper-container {
	        width: 100%;
	        height: 100%;
	        position: absolute;
	        left: 0;
	        top: 0;
	    }
	    .swiper-slide {
	       width: 100%;
	       height: 100%;
	        
	    }
			
		</style> 
	</head>
	<body>
		
		<div class="spinner">
			<span id="progress"></span>
			<div class="double-bounce1"></div>
			<div class="double-bounce2"></div>
		</div>
		<div class="swiper-container" >
        		<div class="swiper-wrapper" style="display: none;">
<!--页面1-->
	            <div class="swiper-slide" style=" width: 100%;height: 100%;background-color: deepskyblue;">
	            	<div style="width: 100%;height: 100%;background-color: black;position: absolute;z-index: -10;"></div>
		            	<img class="x x1" src="" data_src="img/x1.png" alt="" />
		            	<img class="x x2" src="" data_src="img/x2.png" alt="" />
		            	<img class="x x3" src="" data_src="img/x3.png" alt="" />
					<img class="backgroundPic" src="" data_src="img/bg.png"/>
					<img class="word" src="" data_src="img/bg3.png" alt="" />
					<img class="logo" src="" data_src="img/logo.png" alt="" />
					<img class="bgSmoke somke1"src=""  data_src="img/bg1.png"/>
					<img class="bgSmoke somke2" src="" data_src="img/bg2.png"/>
	            </div>
	 
	  
<!--page2 加线-->
	            <div class="swiper-slide" style=" width: 100%;height: 100%;background-color: red;">
	            		
	            	 	<img class="backgroundPic2" src="" data_src="img/page2.png"/>
	            		<canvas id="canvas" width="" height=""></canvas>
	            </div>
	            
	            
<!--page3 加线-->
	            <div class="swiper-slide"style="background-color:black; width: 100%;height: 100%;" >
		            <img class="backgroundPic3" src="" data_src="img/bgword.jpg" alt="" />
		            <img id="poster3" class="poster" src="" data_src="img/3main.png" alt="" />
		            <canvas id="canvas2" width="" height=""></canvas>
	            </div>
	            
	            
<!--page4 加线-->
	            <div id="page4" class="swiper-slide" style="background-color: gray; width: 100%;height: 100%;">
	            	<img class="backgroundPic3" src="" data_src="img/page4.png" alt="" />
	            	<canvas id="canvas4" width="" height=""></canvas>
	            </div>
	            
	            
<!--page5 加线-->	            
	            <div class="swiper-slide" style="background-color: blue; width: 100%;height: 100%;">
	            		<img class="backgroundPic3" src="" data_src="img/bgword.jpg"/>
	            		<img id="poster5" class="poster" src="" data_src="img/5pic.png" alt="" />
	            		<canvas id="canvas5" width="" height=""></canvas>
	            </div>
	            
	            
<!--page6 加线-->		            
	            <div class="swiper-slide" style=" background-color:black;width: 100%;height: 100%;">
	            <img class="backgroundPic3" src="" data_src="img/6bg.png"/>
	            <canvas id="canvas6" width="" height=""></canvas>
	            </div>
	            
	            
	            
<!--page7 多张图展示-->	  
	            <div class="swiper-slide page7" style="background-color: chocolate;width: 100%;height: 100%; ">
	            		<img class="backgroundPic2" src="" data_src="img/bgword.jpg" alt="" />
	            		<img class="poster_btn" src="" data_src="img/浙江海报.jpg"/>
					<div class="masking">
						<p  id="cancel">x</p>
	            			<img src="" data_src="img/重庆海报.jpg"/>
	            			<img src="" data_src="img/福建海报.jpg"/>
	            			<img src="" data_src="img/甘肃海报.jpg"/>
	            			<img src="" data_src="img/广东海报.jpg"/>
	            			<img src="" data_src="img/广西海报.jpg"/>
	            			<img src="" data_src="img/河北海报.jpg"/>
	            			<img src="" data_src="img/江苏海报.jpg"/>
	            			<img src="" data_src="img/宁夏海报.jpg"/>
	            			<img src="" data_src="img/青海海报.jpg"/>
	            			<img src="" data_src="img/山东海报.jpg"/>
	            			<img src="" data_src="img/陕西海报.jpg"/>
	            			<img src="" data_src="img/上海海报.jpg"/>
	            			<img src="" data_src="img/四川海报.jpg"/>
	            			<img src="" data_src="img/新疆海报.jpg"/>
	            			<img src="" data_src="img/云南海报.jpg"/>
	            			<img src="" data_src="img/浙江海报.jpg"/>
	            		</div>
	            		<div class="poster_roll">
						<img src="" data_src="img/7zhizheng.png" />
					</div>
	            </div>

	
	
<!--page8  加线-->		            
	            <div class="swiper-slide" style="background-color:black;width: 100%;height: 100%;">
	           	 	<img class="backgroundPic3" src="" data_src="img/page8.png"/>
	           	 	<canvas id="canvas8" width="" height=""></canvas>
	            </div>
<!--page9  宣传视频-->	            
	             <div class="swiper-slide" style="width: 100%;height: 100%;background-color: red;">
	             	<img class="backgroundPic3" src="" data_src="img/page9.jpg" alt="" />
	             	<div id="audios">
		             	<video id="video"    preload controls>
			                <source  src="1.mp4" type='video/mp4'>
			                <source  src="1.ogg" type='video/ogg'>
	            			</video>
	             	</div>
	             </div>
	          
	             
        		</div>
		</div>
	</body>
	<script src="swiper.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="touch.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>
	
<!--制造线条动画-->
	<script src="createLine.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
	//预加载
	function loadImg(){
				var imgArr = $("img");
				var num = imgArr.length;
				var count =0;
				console.log(imgArr.length);
				for (var i=0;i<imgArr.length;i++) {
					imgArr[i].src = imgArr[i].getAttribute("data_src");
					imgArr[i].setAttribute("data_src","");
					imgArr[i].onload = function(){
						count++;
						var res = count/num;
						res = parseInt(res*100);
						$("#progress").text(res+"%");
						if(count==num){
							$(".spinner").eq(0).hide();
							$(".swiper-wrapper").show();
							show();
						}
					}
				}
				
			}
			loadImg();
	function show(){
		var swiper = new Swiper('.swiper-container', { 
			initialSlide :0,
	        effect: 'cube',
	        loop : true,
	        grabCursor: true,
			direction : 'vertical',
	        cube: {
	            shadow: false,
	            slideShadows: true,
	            shadowOffset: 20,
	            shadowScale: 0.94, 
	        },
	       onSlideChangeEnd: function(swiper){
		     	var index=swiper.activeIndex;
		     	if(index==2){
		     		console.log(index);
		     		page2_function();
		     	}
		     	 if(index==3){ 
		     		console.log(index);
		     		page3_function();
		     		page3_functionB();
		     	}
		   		if(index==4){ 
		     		console.log(index);
		     		page4_function();
		     	}
		     	if(index==5){ 
		     		console.log(index);
		     		page5_function();
		     		page5_functionB();
		     	}
		     	if(index==6){ 
		     		console.log(index);
		     		page6_function();
		     	}
		     	if(index==7){ 
		     		console.log(index);
		     		page7_function();
		     	}
		     	else if(index==8){ 
		     		console.log(index);
		     		page8_function();
		     	}
		    }
	    });
	}

	var flag = 1;
	function large(){
		flag *= -1 ;
		if(flag==-1){
			$(this).animate({
				width:"100%",
				top:"10%",
				left:"0"
			},500)
		}else{
			$(this).animate({
				top: "10%",
				left: "0.8rem",
				width: "8.4rem",
			},500)
		}
	}	
	function page3_functionB(){
		$("#poster3").on("click",large);
	}
	function page5_functionB(){
		$("#poster5").on("click",large);
	}
//page7
	function page7_function(){
		
					var count = $(".masking img").length;
					console.log("图片总数"+count);
					$(".poster_roll").height(30*(count+1));
		
		touch.on('.poster_btn', 'touchstart', function(ev) {
					//点击进入海报展示页面
					$(".masking").show();
					$(".poster_btn").hide();//进入按钮隐藏
					$(".masking img").removeClass().addClass("imgStyle");
					$(".masking img:last").removeClass().addClass("imgStyle1");
					$(".masking img:nth-last-child(2)").removeClass().addClass("imgStyle2");
					ev.preventDefault();//阻止冒泡
				});
				touch.on('.masking p', 'touchstart', function(ev) {
					
					//点击关掉海报展示页面  返回主页面
					$(".masking").hide();
					$(".poster_btn").show();
					$(".masking img").css({
						left:"1rem"// 回复初始的状态
		 		});
					ev.preventDefault();//阻止冒泡
				});
				
				//进入海报展示手指右滑动画效果
				touch.on(".masking img", 'swipeleft', function(ev) {
					var index = $(this).index(".masking img");
					console.log("当前页面"+index);
					if (index!=0) {
						if ($(".masking img").hasClass("down1")) {
							$(".masking img").removeClass("down1");
							$(".masking img").addClass("down2");
						}else if($(".masking img").hasClass("down2")){
							$(".masking img").removeClass("down2");
							$(".masking img").addClass("down1");
						}
						else{
							$(".masking img").addClass("down1");
						}
						$(this).addClass("left");
						$(this).prev().removeClass().addClass("down");
						$(this).prev().prev().removeClass().addClass("down3");
					}else{
						if($(this).hasClass("down")){
							$(this).removeClass("down");
							$(this).addClass("down3");
						}else{
							$(this).addClass("down");
						}
					}
					$(".poster_roll").height(30*(index+1));//标志
				});
				touch.on(".masking img", 'swiperight',function(){
					var index = $(this).index(".masking img");
					console.log("图片页码"+(index+2));
					$(".poster_roll").height(index*30);//海报滚动条的高度
//						
					if(index<$(".masking img").length-1){
						$(this).removeClass().addClass("imgStyle2");
						$(this).prev().removeClass().addClass("imgStyle");
						$(this).next().removeClass().addClass("ringht ");
					}
					
				});
}
	
		
	
	
	</script>
</html>